ЗАДАНИЕ 1: Базовая настройка устройств

Подпункт 1.1: Настройте имена устройств согласно топологии. Используйте полное доменное имя

Для устройств на EcoRouter (HQ-RTR, BR-RTR):
Проверка текущего имени хоста
show hostname

Проверка полного доменного имени в конфигурации
show running-config | include hostname

Проверка настройки домена
show running-config | include domain-name

Пример правильного результата:
должно быть: hostname hq-rtr.example.com

Для устройств на ОС Альт (ISP, HQ-SRV, BR-SRV, HQ-CLI):
Проверка текущего имени хоста
hostname

Проверка полного доменного имени
hostname -f

Проверка конфигурационного файла
cat /etc/hostname

Проверка файла /etc/hosts
cat /etc/hosts

Проверка настройки домена
cat /etc/resolv.conf | grep domain
dnsdomainname

Пример правильного результата:
/etc/hostname должен содержать: hq-srv.example.com


Подпункт 1.2: Если сеть локальная, согласно RFC1918

Проверка всех интерфейсов на соответствие RFC1918
ip addr show | grep inet | grep -E "10\.|172\.1[6-9]\.|172\.2[0-9]\.|172\.3[0-1]\.|192\.168\."

Для сетевого оборудования (EcoRouter):
show ip interface brief

Проверка, что используются только приватные адреса:
10.0.0.0/8
172.16.0.0/12  
192.168.0.0/16


Подпункт 1.3: Локальная сеть в сторону HQ-SRV (VLAN100) должна вмещать не более 64 адресов

Для сетевого оборудования (EcoRouter):
show running-config | include vlan 100
show ip interface vlan 100

Проверка маски подсети (должна быть /26)
192.168.100.0/26 = 64 адреса

Для сервера HQ-SRV:
ip addr show | grep inet
ip route show

Проверка, что маска соответствует /26 (255.255.255.192)


Подпункт 1.4: Локальная сеть в сторону HQ-CLI (VLAN200) должна вмещать не более 16 адресов

Для сетевого оборудования (EcoRouter):
show running-config | include vlan 200
show ip interface vlan 200

Проверка маски подсети (должна быть /28)
192.168.200.0/28 = 16 адресов

Для клиента HQ-CLI:
ip addr show | grep inet

Проверка, что маска соответствует /28 (255.255.255.240)


Подпункт 1.5: Локальная сеть в сторону BR-SRV должна вмещать не более 32 адресов

Для сетевого оборудования (EcoRouter):
show running-config | include [interface-to-BR-SRV]
show ip interface [interface-name]

Проверка маски подсети (должна быть /27)
192.168.X.0/27 = 32 адреса

Для сервера BR-SRV:
ip addr show | grep inet

Проверка, что маска соответствует /27 (255.255.255.224)


Подпункт 1.6: Локальная сеть для управления (VLAN999) должна вмещать не более 8 адресов

Для сетевого оборудования (EcoRouter):
show running-config | include vlan 999
show ip interface vlan 999

Проверка маски подсети (должна быть /29)
192.168.999.0/29 = 8 адресов

Проверка доступа к управлению:
show running-config | include line vty
show running-config | include username

Проверка, что маска соответствует /29 (255.255.255.248)


ЗАДАНИЕ 2: Настройка интерфейсов и маршрутизации на ISP

Подпункт 2.1: Интерфейс, подключенный к магистральному провайдеру, получает адрес по DHCP

Для устройства ISP (ОС Альт):
Проверка конфигурации интерфейса
cat /etc/network/interfaces | grep -A 5 "[external-interface]"
или для RHEL/CentOS:
cat /etc/sysconfig/network-scripts/ifcfg-[external-interface]

Проверка, что интерфейс настроен на DHCP
grep BOOTPROTO /etc/sysconfig/network-scripts/ifcfg-[external-interface]
должно быть: BOOTPROTO=dhcp

Проверка текущего IP адреса
ip addr show [external-interface] | grep inet

Проверка получения адреса от DHCP
dhclient -v [external-interface]
cat /var/lib/dhcp/dhclient.leases


Подпункт 2.2: Настройте маршруты по умолчанию там, где это необходимо

Для устройства ISP:
Проверка маршрута по умолчанию
ip route show default
route -n | grep "^0.0.0.0"

Для сетевого оборудования (если используется):
show ip route 0.0.0.0
show running-config | include ip route 0.0.0.0

Для HQ-RTR и BR-RTR (EcoRouter):
Проверка маршрута по умолчанию
show ip route 0.0.0.0
show running-config | include ip route 0.0.0.0


Подпункт 2.3: Интерфейс, к которому подключен HQ-RTR, подключен к сети 172.16.4.0/28

Для устройства ISP:
Проверка конфигурации интерфейса к HQ-RTR
ip addr show [interface-to-HQ-RTR] | grep inet

Диапазон: 172.16.4.0 - 172.16.4.15
Маска: 255.255.255.240 (/28)


Подпункт 2.4: Интерфейс, к которому подключен BR-RTR, подключен к сети 172.16.5.0/28

Для устройства ISP:
Проверка конфигурации интерфейса к BR-RTR
ip addr show [interface-to-BR-RTR] | grep inet

Диапазон: 172.16.5.0 - 172.16.5.15
Маска: 255.255.255.240 (/28)


Подпункт 2.5: На ISP настройте динамическую сетевую трансляцию в сторону HQ-RTR и BR-RTR для доступа к сети

Для устройства ISP (ОС Альт с iptables):
Проверка правил NAT
iptables -t nat -L -n -v

Проверка правила маскарадинга
iptables -t nat -L POSTROUTING -n -v | grep MASQUERADE

Проверка включения форвардинга
sysctl net.ipv4.ip_forward
должно быть: 1


ЗАДАНИЕ 3: Настройка маршрутизации между сетями

Подпункт 3.1: Настройте статическую маршрутизацию между всеми сетями

Для HQ-RTR (EcoRouter):
show ip route
show running-config | include ip route


Подпункт 3.2: Настройте динамическую маршрутизацию OSPF

Для устройств с поддержкой OSPF (EcoRouter):
Проверка статуса OSPF
show ip ospf

Проверка соседей OSPF
show ip ospf neighbor

Проверка конфигурации OSPF
show running-config | section router ospf

Проверка включенных сетей в OSPF
show ip ospf interface


ЗАДАНИЕ 4: Настройка безопасности

Подпункт 4.1: Настройте аутентификацию для доступа к устройствам

Для сетевого оборудования (EcoRouter):
show running-config | include username
show running-config | include line vty


Подпункт 4.2: Настройте доступ по SSH

Для сетевого оборудования (EcoRouter):
show running-config | include ssh
show running-config | include line vty
должно быть: ip ssh version 2


Для ОС Альт:
cat /etc/ssh/sshd_config
systemctl status sshd
ss -tlnp | grep :22


Подпункт 4.3: Настройте правила фаервола

Для ОС Альт (iptables):
iptables -L -n -v
iptables -t nat -L -n -v


ЗАДАНИЕ 5: Настройка сетевых служб

Подпункт 5.1: Настройте службу DHCP

Для сервера DHCP:
systemctl status dhcpd
cat /etc/dhcp/dhcpd.conf


Подпункт 5.2: Настройте службу DNS

Для сервера DNS:
systemctl status named
cat /etc/named.conf


Подпункт 5.3: Настройте службу NTP

Для сервера NTP:
systemctl status ntpd
ntpq -p


ЗАДАНИЕ 6: Настройка логирования

Подпункт 6.1: Настройте централизованное логирование

Для сервера логов:
systemctl status rsyslog
cat /etc/rsyslog.conf


ЗАДАНИЕ 7: Настройка виртуальных локальных сетей (VLAN)

Подпункт 7.1: Настройте VLAN на коммутаторах

Для сетевого оборудования:
show vlan brief
show interfaces trunk


Подпункт 7.2: Настройте межсетевую маршрутизацию между VLAN

show ip interface brief | grep Vlan
show ip interface Vlan100


ЗАДАНИЕ 8: Настройка доступа к интернету

Подпункт 8.1: Настройте маршрутизацию к интернету

ip route show default


Подпункт 8.2: Настройте трансляцию сетевых адресов (NAT)

iptables -t nat -L -n -v
sysctl net.ipv4.ip_forward


Подпункт 8.3: Проверьте доступ к интернету

ping -c 4 8.8.8.8
nslookup google.com
curl -I https://google.com


ЗАДАНИЕ 9: Настройка мониторинга и управления

Подпункт 9.1: Настройте протокол SNMP

Для сетевого оборудования:
show running-config | include snmp


Подпункт 9.2: Настройте протокол управления сетью (NETCONF/YANG)

show netconf-yang status


ЗАДАНИЕ 10: Настройка резервирования и отказоустойчивости

Подпункт 10.1: Настройте протокол динамического резервирования шлюза (HSRP/VRRP)

show standby brief
show vrrp brief


Подпункт 10.2: Настройте резервные каналы связи

show ip route
show track


ЗАДАНИЕ 11: Тестирование и верификация

Подпункт 11.1: Проверьте связность сети

ping -c 4 [device-ip]
traceroute [destination-ip]


Подпункт 11.2: Проверьте работоспособность сетевых служб

systemctl status dhcpd
nslookup [hostname]
ntpq -p


Подпункт 11.3: Проверьте производительность сети

iperf3 -c [server-ip]
ping -c 100 [target-ip]


Подпункт 11.4: Составьте отчет о настройке

Для сетевого оборудования:
show running-config > config_backup.txt
show ip route >> config_backup.txt

Для ОС Альт:
ip addr show > network_config.txt
ip route show >> network_config.txt
